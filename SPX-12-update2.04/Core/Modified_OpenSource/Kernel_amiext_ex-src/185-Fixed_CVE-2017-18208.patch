diff -Naur linux_org/mm/madvise.c linux/mm/madvise.c
--- linux_org/mm/madvise.c	2019-04-08 13:49:45.170203436 +0800
+++ linux/mm/madvise.c	2019-04-08 14:00:12.744148551 +0800
@@ -221,9 +221,9 @@
 {
 	struct file *file = vma->vm_file;
 
+	*prev = vma;
 #ifdef CONFIG_SWAP
-	if (!file || mapping_cap_swap_backed(file->f_mapping)) {
-		*prev = vma;
+	if (!file || mapping_cap_swap_backed(file->f_mapping)) {		
 		if (!file)
 			force_swapin_readahead(vma, start, end);
 		else
@@ -241,7 +241,6 @@
 		return 0;
 	}
 
-	*prev = vma;
 	start = ((start - vma->vm_start) >> PAGE_SHIFT) + vma->vm_pgoff;
 	if (end > vma->vm_end)
 		end = vma->vm_end;
