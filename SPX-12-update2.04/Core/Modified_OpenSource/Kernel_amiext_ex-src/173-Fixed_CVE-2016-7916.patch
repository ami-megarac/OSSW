diff -Naur linux_org/fs/proc/base.c linux/fs/proc/base.c
--- linux_org/fs/proc/base.c	2019-03-28 11:31:53.264474979 +0800
+++ linux/fs/proc/base.c	2019-03-28 11:34:13.955345009 +0800
@@ -844,7 +844,8 @@
 	int ret = 0;
 	struct mm_struct *mm = file->private_data;
 
-	if (!mm)
+	/* Ensure the process spawned far enough to have an environment. */
+	if (!mm || !mm->env_end)
 		return 0;
 
 	page = (char *)__get_free_page(GFP_TEMPORARY);
