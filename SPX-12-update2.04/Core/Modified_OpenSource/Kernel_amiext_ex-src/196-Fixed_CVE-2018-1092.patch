diff -Naur linux_org/fs/ext4/inode.c linux/fs/ext4/inode.c
--- linux_org/fs/ext4/inode.c	2019-04-10 15:53:29.220623387 +0800
+++ linux/fs/ext4/inode.c	2019-04-10 15:54:14.754254087 +0800
@@ -4047,6 +4047,12 @@
 		goto bad_inode;
 	raw_inode = ext4_raw_inode(&iloc);
 
+	if ((ino == EXT4_ROOT_INO) && (raw_inode->i_links_count == 0)) {
+		EXT4_ERROR_INODE(inode, "root inode unallocated");
+		ret = -EIO;
+		goto bad_inode;
+	}	
+	
 	if (EXT4_INODE_SIZE(inode->i_sb) > EXT4_GOOD_OLD_INODE_SIZE) {
 		ei->i_extra_isize = le16_to_cpu(raw_inode->i_extra_isize);
 		if (EXT4_GOOD_OLD_INODE_SIZE + ei->i_extra_isize >
