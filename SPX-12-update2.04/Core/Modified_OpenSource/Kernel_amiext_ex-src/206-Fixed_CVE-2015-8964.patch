diff -Naur linux_org/drivers/tty/tty_ldisc.c linux/drivers/tty/tty_ldisc.c
--- linux_org/drivers/tty/tty_ldisc.c	2019-04-11 15:01:38.864477189 +0800
+++ linux/drivers/tty/tty_ldisc.c	2019-04-11 15:02:18.326586083 +0800
@@ -414,6 +414,10 @@
  *	they are not on hot paths so a little discipline won't do
  *	any harm.
  *
+ *	The line discipline-related tty_struct fields are reset to
+ *	prevent the ldisc driver from re-using stale information for
+ *	the new ldisc instance.
+ * 
  *	Locking: takes termios_rwsem
  */
 
@@ -422,6 +426,9 @@
 	down_write(&tty->termios_rwsem);
 	tty->termios.c_line = num;
 	up_write(&tty->termios_rwsem);
+
+	tty->disc_data = NULL;
+	tty->receive_room = 0;	
 }
 
 /**
