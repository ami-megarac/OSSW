--- a/fs/cifs/smb2pdu.c	2019-08-14 14:34:34.303910684 +0800
+++ b/fs/cifs/smb2pdu.c	2019-08-14 14:51:02.863523198 +0800
@@ -911,7 +911,8 @@
 tcon_error_exit:
 	if (rsp->hdr.Status == STATUS_BAD_NETWORK_NAME) {
 		cifs_dbg(VFS, "BAD_NETWORK_NAME: %s\n", tree);
-		tcon->bad_network_name = true;
+		if (tcon)
+			tcon->bad_network_name = true;
 	}
 	goto tcon_exit;
 }
