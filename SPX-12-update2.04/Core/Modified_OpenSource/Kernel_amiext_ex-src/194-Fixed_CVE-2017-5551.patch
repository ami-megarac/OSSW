diff -Naur linux_org/fs/posix_acl.c linux/fs/posix_acl.c
--- linux_org/fs/posix_acl.c	2019-04-10 15:35:09.084620714 +0800
+++ linux/fs/posix_acl.c	2019-04-10 15:35:40.139231286 +0800
@@ -900,11 +900,10 @@
 	int error;
 
 	if (type == ACL_TYPE_ACCESS) {
-		error = posix_acl_equiv_mode(acl, &inode->i_mode);
-		if (error < 0)
-			return 0;
-		if (error == 0)
-			acl = NULL;
+		error = posix_acl_update_mode(inode,
+				&inode->i_mode, &acl);
+		if (error)
+			return error;
 	}
 
 	inode->i_ctime = CURRENT_TIME;
